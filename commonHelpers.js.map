{"version":3,"file":"commonHelpers.js","sources":["../src/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://api.thecatapi.com/v1/breeds';\nconst API_KEY =\n  'live_99SRprGcBXfKYNGHvvn3sqvYRx2GdYXKq7upUqiL81KLtOn9e6otrBDcmh4HWOiQ';\n\naxios.defaults.headers.common['x-api-key'] = API_KEY;\n\nexport function fetchBreeds() {\n  return axios.get(BASE_URL).then(response => {\n    return response.data;\n  });\n}\n\nexport function fetchCatByBreed(breedId) {\n  const CAT_API_URL = 'https://api.thecatapi.com/v1/images/search';\n\n  return axios\n    .get(CAT_API_URL, {\n      params: {\n        breed_ids: breedId,\n      },\n    })\n    .then(response => {\n      return response.data;\n    });\n}","import { fetchBreeds, fetchCatByBreed } from './cat-api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const elements = {\n    breedSelect: document.querySelector('.breed-select'),\n    catInfo: document.querySelector('.cat-info'),\n    loader: document.querySelector('.loader'),\n  };\n\n  const slimSelect = new SlimSelect({\n    select: elements.breedSelect,\n    placeholder: 'Select a breed',\n    showSearch: true,\n    searchText: 'No matches found',\n    searchPlaceholder: 'Search...',\n    searchHighlight: true,\n    searchFocus: true,\n    allowDeselect: false,\n    onChange: handleBreedSelectChange,\n  });\n\n  function displayCatInfo(catData) {\n    elements.catInfo.innerHTML = createMarkup(catData);\n  }\n\n  function handleBreedSelectChange() {\n    const selectedBreedId = slimSelect.selected();\n    elements.catInfo.innerHTML = '';\n\n    if (selectedBreedId) {\n      showLoader();\n    }\n\n    fetchCatByBreed(selectedBreedId)\n      .then(catData => {\n        if (catData && catData.length > 0) {\n          displayCatInfo(catData);\n        } else {\n          showError('Oops! Something went wrong! Try reloading the page!');\n        }\n      })\n      .catch(error => handleError(error))\n      .finally(() => {\n        if (selectedBreedId) {\n          hideLoader();\n          showSlimSelect();\n        }\n      });\n  }\n\n  function serviceCatSearch() {\n    showLoader();\n\n    return fetchBreeds()\n      .then(data => {\n        if (data && data.length > 0) {\n          displayBreeds(data);\n        } else {\n          showError('No cat breeds received or empty array!');\n        }\n      })\n      .catch(error => handleError(error))\n      .finally(() => {\n        hideLoader();\n        showSlimSelect();\n      });\n  }\n\n  function displayBreeds(data) {\n    slimSelect.setData(\n      data.map(catBreed => ({ text: catBreed.name, value: catBreed.id }))\n    );\n  }\n\n  function createMarkup(catData) {\n    return catData\n      .map(({ url, breeds }) => {\n        const [firstBreed] = breeds;\n\n        return `\n          <img src=\"${url}\" alt=\"${firstBreed.name}\" width=\"300\">\n          <div>\n            <h3>${firstBreed.name}</h3>\n            <p><strong>Description:</strong> ${firstBreed.description}</p>\n            <p><strong>Temperament:</strong> ${firstBreed.temperament}</p>\n          </div>\n        `;\n      })\n      .join('');\n  }\n\n  function showLoader() {\n    elements.loader.style.display = 'block';\n  }\n\n  function hideLoader() {\n    elements.loader.style.display = 'none';\n  }\n\n  function showSlimSelect() {\n    slimSelect.slim.container.style.display = 'block';\n  }\n\n  function handleError(error) {\n    console.error('Error:', error);\n    showError('Oops! Something went wrong! Try reloading the page!');\n  }\n\n  function showError(message) {\n    iziToast.error({\n      title: 'Error',\n      message: message,\n      position: 'topRight',\n    });\n  }\n  showLoader();\n  serviceCatSearch();\n});"],"names":["BASE_URL","API_KEY","axios","fetchBreeds","response","fetchCatByBreed","breedId","CAT_API_URL","elements","slimSelect","handleBreedSelectChange","displayCatInfo","catData","createMarkup","selectedBreedId","showLoader","showError","error","handleError","hideLoader","showSlimSelect","serviceCatSearch","data","displayBreeds","catBreed","url","breeds","firstBreed","message","iziToast"],"mappings":"6vBAEA,MAAMA,EAAW,sCACXC,EACJ,wEAEFC,EAAM,SAAS,QAAQ,OAAO,WAAW,EAAID,EAEtC,SAASE,GAAc,CAC5B,OAAOD,EAAM,IAAIF,CAAQ,EAAE,KAAKI,GACvBA,EAAS,IACjB,CACH,CAEO,SAASC,EAAgBC,EAAS,CACvC,MAAMC,EAAc,6CAEpB,OAAOL,EACJ,IAAIK,EAAa,CAChB,OAAQ,CACN,UAAWD,CACZ,CACP,CAAK,EACA,KAAKF,GACGA,EAAS,IACjB,CACL,CCtBA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMI,EAAW,CACf,YAAa,SAAS,cAAc,eAAe,EACnD,QAAS,SAAS,cAAc,WAAW,EAC3C,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEQC,EAAa,IAAI,WAAW,CAChC,OAAQD,EAAS,YACjB,YAAa,iBACb,WAAY,GACZ,WAAY,mBACZ,kBAAmB,YACnB,gBAAiB,GACjB,YAAa,GACb,cAAe,GACf,SAAUE,CACd,CAAG,EAED,SAASC,EAAeC,EAAS,CAC/BJ,EAAS,QAAQ,UAAYK,EAAaD,CAAO,CAClD,CAED,SAASF,GAA0B,CACjC,MAAMI,EAAkBL,EAAW,WACnCD,EAAS,QAAQ,UAAY,GAEzBM,GACFC,IAGFV,EAAgBS,CAAe,EAC5B,KAAKF,GAAW,CACXA,GAAWA,EAAQ,OAAS,EAC9BD,EAAeC,CAAO,EAEtBI,EAAU,qDAAqD,CAEzE,CAAO,EACA,MAAMC,GAASC,EAAYD,CAAK,CAAC,EACjC,QAAQ,IAAM,CACTH,IACFK,IACAC,IAEV,CAAO,CACJ,CAED,SAASC,GAAmB,CAC1B,OAAAN,IAEOZ,EAAa,EACjB,KAAKmB,GAAQ,CACRA,GAAQA,EAAK,OAAS,EACxBC,EAAcD,CAAI,EAElBN,EAAU,wCAAwC,CAE5D,CAAO,EACA,MAAMC,GAASC,EAAYD,CAAK,CAAC,EACjC,QAAQ,IAAM,CACbE,IACAC,GACR,CAAO,CACJ,CAED,SAASG,EAAcD,EAAM,CAC3Bb,EAAW,QACTa,EAAK,IAAIE,IAAa,CAAE,KAAMA,EAAS,KAAM,MAAOA,EAAS,EAAE,EAAG,CACxE,CACG,CAED,SAASX,EAAaD,EAAS,CAC7B,OAAOA,EACJ,IAAI,CAAC,CAAE,IAAAa,EAAK,OAAAC,KAAa,CACxB,KAAM,CAACC,CAAU,EAAID,EAErB,MAAO;AAAA,sBACOD,CAAG,UAAUE,EAAW,IAAI;AAAA;AAAA,kBAEhCA,EAAW,IAAI;AAAA,+CACcA,EAAW,WAAW;AAAA,+CACtBA,EAAW,WAAW;AAAA;AAAA,SAGrE,CAAO,EACA,KAAK,EAAE,CACX,CAED,SAASZ,GAAa,CACpBP,EAAS,OAAO,MAAM,QAAU,OACjC,CAED,SAASW,GAAa,CACpBX,EAAS,OAAO,MAAM,QAAU,MACjC,CAED,SAASY,GAAiB,CACxBX,EAAW,KAAK,UAAU,MAAM,QAAU,OAC3C,CAED,SAASS,EAAYD,EAAO,CAC1B,QAAQ,MAAM,SAAUA,CAAK,EAC7BD,EAAU,qDAAqD,CAChE,CAED,SAASA,EAAUY,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,SAAU,UAChB,CAAK,CACF,CACDb,IACAM,GACF,CAAC"}